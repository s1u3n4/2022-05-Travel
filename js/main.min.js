"use strict";const unlock=document.querySelectorAll(".it_unlock"),gameLogin=document.querySelector("#it_game_login"),lottery=document.querySelector("#lottery"),awards=document.querySelectorAll(".it_awards"),cpyLogin=document.querySelector("#it_cpy_login"),passport=document.querySelector(".modal-body__imgPassort__wrap"),cpyBtn=document.querySelectorAll(".modal-btn__Passort__copy_default");$(".it_awards").hide(),$.ajax({method:"GET",type:"GET",url:"/api?page=tasteOfTravel",async:!1,dataType:"json",success:e=>{const t="nonLogin"===e.ErrorDesc||"Out of range"===e.ErrorDesc?"block":"none",r="nonLogin"===e.ErrorDesc||"Out of range"===e.ErrorDesc?"none":"block";gameLogin.style.display=`${t}`,cpyLogin.style.display=`${t}`,passport.style.display=`${r}`,"Out of range"===e.ErrorDesc&&($(".f5.text_purple").html("活動尚未開始"),$("#it_cpy_login .btn-, #it_game_login .btn-").hide())},error:e=>{console.error(e)}}),lottery.addEventListener("click",e=>{$.ajax({method:"GET",type:"GET",url:"/api?page=tasteOfTravel&register=1",async:!1,dataType:"json",success:e=>{if("done"===e.ErrorDesc||"inGroup"===e.ErrorDesc){var t=e.Result;$("#it-gift-"+t).show(),t<8&&e.ErrorType&&$("#it-gift-send").show()}},error:e=>{console.error(e)}})}),cpyBtn.forEach(e=>{e.addEventListener("click",e=>{const t=e.target.parentNode.children[1].textContent;navigator.clipboard.writeText(t),e.target.textContent="已複製",setTimeout(()=>{e.target.textContent="複製"},1e3)})});const sendInfo=()=>{const e=/^(\S{2,})$/,t=/^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/,r=$('input[name="name"]').val(),o=$('input[name="mail"]').val();let a,n=!1,s={userName:r,userEmail:o};console.log("BB",s);const l=()=>{$.ajax({type:"POST",url:"/api?page=tasteOfTravelReply&userName="+s.userName+"&userEmail="+s.userEmail,data:s,dataType:"json",success:e=>{$(".input__frame__style, #it-send").hide(),$(".error").html(""),$(".sent").text("已送出，感謝您的參與!")},error:e=>{console.error("Failed to send data.")}})};$(".error").html(""),e.test(r)?a=!0:(a=!1,$(".error").append("姓名請至少填寫兩個字<br>")),t.test(o)?n=!0:(n=!1,$(".error").append("Email格式有誤<br>")),a&&n&&l()};$("#it-send").on("click",sendInfo);